"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.pluginE2EHarness = pluginE2EHarness;

require("source-map-support/register");

var _support = require("appium/support");

var _appium = require("appium");

var _getPort = _interopRequireDefault(require("get-port"));

var _logSymbols = require("log-symbols");

var _teen_process = require("teen_process");

const APPIUM_BIN = require.resolve('appium');

function pluginE2EHarness(opts) {
  let {
    appiumHome,
    before,
    after,
    serverArgs = {},
    driverSource,
    driverPackage,
    driverName,
    driverSpec,
    pluginSource,
    pluginPackage,
    pluginSpec,
    pluginName,
    port,
    host
  } = opts;
  let server;
  before(async function () {
    const setupAppiumHome = async () => {
      const env = { ...process.env
      };

      if (appiumHome) {
        env.APPIUM_HOME = appiumHome;
        await _support.fs.mkdirp(appiumHome);
        console.log(`${_logSymbols.info} Set \`APPIUM_HOME\` to ${appiumHome}`);
      }

      return env;
    };

    const installDriver = async env => {
      var _installedDrivers$dri;

      console.log(`${_logSymbols.info} Checking if driver "${driverName}" is installed...`);
      const driverListArgs = [APPIUM_BIN, 'driver', 'list', '--json'];
      console.log(`${_logSymbols.info} Running: ${process.execPath} ${driverListArgs.join(' ')}`);
      const {
        stdout: driverListJson
      } = await (0, _teen_process.exec)(process.execPath, driverListArgs, {
        env
      });
      const installedDrivers = JSON.parse(driverListJson);

      if (!((_installedDrivers$dri = installedDrivers[driverName]) !== null && _installedDrivers$dri !== void 0 && _installedDrivers$dri.installed)) {
        console.log(`${_logSymbols.warning} Driver "${driverName}" not installed; installing...`);
        const driverArgs = [APPIUM_BIN, 'driver', 'install', '--source', driverSource, driverSpec];

        if (driverPackage) {
          driverArgs.push('--package', driverPackage);
        }

        console.log(`${_logSymbols.info} Running: ${process.execPath} ${driverArgs.join(' ')}`);
        await (0, _teen_process.exec)(process.execPath, driverArgs, {
          env
        });
      }

      console.log(`${_logSymbols.success} Installed driver "${driverName}"`);
    };

    const installPlugin = async env => {
      var _installedPlugins$plu;

      console.log(`${_logSymbols.info} Checking if plugin "${pluginName}" is installed...`);
      const pluginListArgs = [APPIUM_BIN, 'plugin', 'list', '--json'];
      const {
        stdout: pluginListJson
      } = await (0, _teen_process.exec)(process.execPath, pluginListArgs, {
        env
      });
      const installedPlugins = JSON.parse(pluginListJson);

      if (!((_installedPlugins$plu = installedPlugins[pluginName]) !== null && _installedPlugins$plu !== void 0 && _installedPlugins$plu.installed)) {
        console.log(`${_logSymbols.warning} Plugin "${pluginName}" not installed; installing...`);
        const pluginArgs = [APPIUM_BIN, 'plugin', 'install', '--source', pluginSource, pluginSpec];

        if (pluginPackage) {
          pluginArgs.push('--package', pluginPackage);
        }

        console.log(`${_logSymbols.info} Running: ${process.execPath} ${pluginArgs.join(' ')}`);
        await (0, _teen_process.exec)(process.execPath, pluginArgs, {
          env
        });
      }

      console.log(`${_logSymbols.success} Installed plugin "${pluginName}"`);
    };

    const createServer = async () => {
      if (!port) {
        port = await (0, _getPort.default)();
      }

      console.log(`${_logSymbols.info} Will use port ${port} for Appium server`);
      this.port = port;
      const args = {
        port,
        address: host,
        usePlugins: [pluginName],
        useDrivers: [driverName],
        appiumHome,
        ...serverArgs
      };
      server = await (0, _appium.main)(args);
    };

    const env = await setupAppiumHome();
    await installDriver(env);
    await installPlugin(env);
    await createServer();
  });
  after(async function () {
    if (server) {
      await server.close();
    }
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUFBJVU1fQklOIiwicmVxdWlyZSIsInJlc29sdmUiLCJwbHVnaW5FMkVIYXJuZXNzIiwib3B0cyIsImFwcGl1bUhvbWUiLCJiZWZvcmUiLCJhZnRlciIsInNlcnZlckFyZ3MiLCJkcml2ZXJTb3VyY2UiLCJkcml2ZXJQYWNrYWdlIiwiZHJpdmVyTmFtZSIsImRyaXZlclNwZWMiLCJwbHVnaW5Tb3VyY2UiLCJwbHVnaW5QYWNrYWdlIiwicGx1Z2luU3BlYyIsInBsdWdpbk5hbWUiLCJwb3J0IiwiaG9zdCIsInNlcnZlciIsInNldHVwQXBwaXVtSG9tZSIsImVudiIsInByb2Nlc3MiLCJBUFBJVU1fSE9NRSIsImZzIiwibWtkaXJwIiwiY29uc29sZSIsImxvZyIsImluZm8iLCJpbnN0YWxsRHJpdmVyIiwiZHJpdmVyTGlzdEFyZ3MiLCJleGVjUGF0aCIsImpvaW4iLCJzdGRvdXQiLCJkcml2ZXJMaXN0SnNvbiIsImV4ZWMiLCJpbnN0YWxsZWREcml2ZXJzIiwiSlNPTiIsInBhcnNlIiwiaW5zdGFsbGVkIiwid2FybmluZyIsImRyaXZlckFyZ3MiLCJwdXNoIiwic3VjY2VzcyIsImluc3RhbGxQbHVnaW4iLCJwbHVnaW5MaXN0QXJncyIsInBsdWdpbkxpc3RKc29uIiwiaW5zdGFsbGVkUGx1Z2lucyIsInBsdWdpbkFyZ3MiLCJjcmVhdGVTZXJ2ZXIiLCJnZXRQb3J0IiwiYXJncyIsImFkZHJlc3MiLCJ1c2VQbHVnaW5zIiwidXNlRHJpdmVycyIsImFwcGl1bVNlcnZlciIsImNsb3NlIl0sInNvdXJjZXMiOlsiLi4vLi4vbGliL3BsdWdpbi1lMmUtaGFybmVzcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG5pbXBvcnQge2ZzfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQge21haW4gYXMgYXBwaXVtU2VydmVyfSBmcm9tICdhcHBpdW0nO1xuaW1wb3J0IGdldFBvcnQgZnJvbSAnZ2V0LXBvcnQnO1xuaW1wb3J0IHtpbmZvLCBzdWNjZXNzLCB3YXJuaW5nfSBmcm9tICdsb2ctc3ltYm9scyc7XG5pbXBvcnQge2V4ZWN9IGZyb20gJ3RlZW5fcHJvY2Vzcyc7XG5cbmNvbnN0IEFQUElVTV9CSU4gPSByZXF1aXJlLnJlc29sdmUoJ2FwcGl1bScpO1xuXG4vKipcbiAqIENyZWF0ZXMgaG9va3MgdG8gaW5zdGFsbCBhIGRyaXZlciBhbmQgYSBwbHVnaW4gYW5kIHN0YXJ0cyBhbiBBcHBpdW0gc2VydmVyIHcvIHRoZSBnaXZlbiBleHRlbnNpb25zLlxuICogQHBhcmFtIHtFMkVTZXR1cE9wdHN9IG9wdHNcbiAqIEByZXR1cm5zIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGx1Z2luRTJFSGFybmVzcyhvcHRzKSB7XG4gIGxldCB7XG4gICAgYXBwaXVtSG9tZSxcbiAgICBiZWZvcmUsXG4gICAgYWZ0ZXIsXG4gICAgc2VydmVyQXJncyA9IHt9LFxuICAgIGRyaXZlclNvdXJjZSxcbiAgICBkcml2ZXJQYWNrYWdlLFxuICAgIGRyaXZlck5hbWUsXG4gICAgZHJpdmVyU3BlYyxcbiAgICBwbHVnaW5Tb3VyY2UsXG4gICAgcGx1Z2luUGFja2FnZSxcbiAgICBwbHVnaW5TcGVjLFxuICAgIHBsdWdpbk5hbWUsXG4gICAgcG9ydCxcbiAgICBob3N0LFxuICB9ID0gb3B0cztcblxuICAvKipcbiAgICogQHR5cGUge0FwcGl1bVNlcnZlcn1cbiAgICovXG4gIGxldCBzZXJ2ZXI7XG5cbiAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzZXR1cEFwcGl1bUhvbWUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAvKipcbiAgICAgICAqIEB0eXBlIHtBcHBpdW1FbnZ9XG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGVudiA9IHsuLi5wcm9jZXNzLmVudn07XG5cbiAgICAgIGlmIChhcHBpdW1Ib21lKSB7XG4gICAgICAgIGVudi5BUFBJVU1fSE9NRSA9IGFwcGl1bUhvbWU7XG4gICAgICAgIGF3YWl0IGZzLm1rZGlycChhcHBpdW1Ib21lKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7aW5mb30gU2V0IFxcYEFQUElVTV9IT01FXFxgIHRvICR7YXBwaXVtSG9tZX1gKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVudjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwcGl1bUVudn0gZW52XG4gICAgICovXG4gICAgY29uc3QgaW5zdGFsbERyaXZlciA9IGFzeW5jIChlbnYpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGAke2luZm99IENoZWNraW5nIGlmIGRyaXZlciBcIiR7ZHJpdmVyTmFtZX1cIiBpcyBpbnN0YWxsZWQuLi5gKTtcbiAgICAgIGNvbnN0IGRyaXZlckxpc3RBcmdzID0gW0FQUElVTV9CSU4sICdkcml2ZXInLCAnbGlzdCcsICctLWpzb24nXTtcbiAgICAgIGNvbnNvbGUubG9nKGAke2luZm99IFJ1bm5pbmc6ICR7cHJvY2Vzcy5leGVjUGF0aH0gJHtkcml2ZXJMaXN0QXJncy5qb2luKCcgJyl9YCk7XG4gICAgICBjb25zdCB7c3Rkb3V0OiBkcml2ZXJMaXN0SnNvbn0gPSBhd2FpdCBleGVjKHByb2Nlc3MuZXhlY1BhdGgsIGRyaXZlckxpc3RBcmdzLCB7XG4gICAgICAgIGVudixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaW5zdGFsbGVkRHJpdmVycyA9IEpTT04ucGFyc2UoZHJpdmVyTGlzdEpzb24pO1xuXG4gICAgICBpZiAoIWluc3RhbGxlZERyaXZlcnNbZHJpdmVyTmFtZV0/Lmluc3RhbGxlZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3YXJuaW5nfSBEcml2ZXIgXCIke2RyaXZlck5hbWV9XCIgbm90IGluc3RhbGxlZDsgaW5zdGFsbGluZy4uLmApO1xuICAgICAgICBjb25zdCBkcml2ZXJBcmdzID0gW0FQUElVTV9CSU4sICdkcml2ZXInLCAnaW5zdGFsbCcsICctLXNvdXJjZScsIGRyaXZlclNvdXJjZSwgZHJpdmVyU3BlY107XG4gICAgICAgIGlmIChkcml2ZXJQYWNrYWdlKSB7XG4gICAgICAgICAgZHJpdmVyQXJncy5wdXNoKCctLXBhY2thZ2UnLCBkcml2ZXJQYWNrYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgJHtpbmZvfSBSdW5uaW5nOiAke3Byb2Nlc3MuZXhlY1BhdGh9ICR7ZHJpdmVyQXJncy5qb2luKCcgJyl9YCk7XG4gICAgICAgIGF3YWl0IGV4ZWMocHJvY2Vzcy5leGVjUGF0aCwgZHJpdmVyQXJncywge1xuICAgICAgICAgIGVudixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgJHtzdWNjZXNzfSBJbnN0YWxsZWQgZHJpdmVyIFwiJHtkcml2ZXJOYW1lfVwiYCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcHBpdW1FbnZ9IGVudlxuICAgICAqL1xuICAgIGNvbnN0IGluc3RhbGxQbHVnaW4gPSBhc3luYyAoZW52KSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhgJHtpbmZvfSBDaGVja2luZyBpZiBwbHVnaW4gXCIke3BsdWdpbk5hbWV9XCIgaXMgaW5zdGFsbGVkLi4uYCk7XG4gICAgICBjb25zdCBwbHVnaW5MaXN0QXJncyA9IFtBUFBJVU1fQklOLCAncGx1Z2luJywgJ2xpc3QnLCAnLS1qc29uJ107XG4gICAgICBjb25zdCB7c3Rkb3V0OiBwbHVnaW5MaXN0SnNvbn0gPSBhd2FpdCBleGVjKHByb2Nlc3MuZXhlY1BhdGgsIHBsdWdpbkxpc3RBcmdzLCB7XG4gICAgICAgIGVudixcbiAgICAgIH0pO1xuICAgICAgY29uc3QgaW5zdGFsbGVkUGx1Z2lucyA9IEpTT04ucGFyc2UocGx1Z2luTGlzdEpzb24pO1xuXG4gICAgICBpZiAoIWluc3RhbGxlZFBsdWdpbnNbcGx1Z2luTmFtZV0/Lmluc3RhbGxlZCkge1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3YXJuaW5nfSBQbHVnaW4gXCIke3BsdWdpbk5hbWV9XCIgbm90IGluc3RhbGxlZDsgaW5zdGFsbGluZy4uLmApO1xuICAgICAgICBjb25zdCBwbHVnaW5BcmdzID0gW0FQUElVTV9CSU4sICdwbHVnaW4nLCAnaW5zdGFsbCcsICctLXNvdXJjZScsIHBsdWdpblNvdXJjZSwgcGx1Z2luU3BlY107XG4gICAgICAgIGlmIChwbHVnaW5QYWNrYWdlKSB7XG4gICAgICAgICAgcGx1Z2luQXJncy5wdXNoKCctLXBhY2thZ2UnLCBwbHVnaW5QYWNrYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhgJHtpbmZvfSBSdW5uaW5nOiAke3Byb2Nlc3MuZXhlY1BhdGh9ICR7cGx1Z2luQXJncy5qb2luKCcgJyl9YCk7XG4gICAgICAgIGF3YWl0IGV4ZWMocHJvY2Vzcy5leGVjUGF0aCwgcGx1Z2luQXJncywge1xuICAgICAgICAgIGVudixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhgJHtzdWNjZXNzfSBJbnN0YWxsZWQgcGx1Z2luIFwiJHtwbHVnaW5OYW1lfVwiYCk7XG4gICAgfTtcblxuICAgIGNvbnN0IGNyZWF0ZVNlcnZlciA9IGFzeW5jICgpID0+IHtcbiAgICAgIGlmICghcG9ydCkge1xuICAgICAgICBwb3J0ID0gYXdhaXQgZ2V0UG9ydCgpO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coYCR7aW5mb30gV2lsbCB1c2UgcG9ydCAke3BvcnR9IGZvciBBcHBpdW0gc2VydmVyYCk7XG4gICAgICB0aGlzLnBvcnQgPSBwb3J0O1xuXG4gICAgICAvKiogQHR5cGUge2ltcG9ydCgnYXBwaXVtJykuQXJnc30gKi9cbiAgICAgIGNvbnN0IGFyZ3MgPSB7XG4gICAgICAgIHBvcnQsXG4gICAgICAgIGFkZHJlc3M6IGhvc3QsXG4gICAgICAgIHVzZVBsdWdpbnM6IFtwbHVnaW5OYW1lXSxcbiAgICAgICAgdXNlRHJpdmVyczogW2RyaXZlck5hbWVdLFxuICAgICAgICBhcHBpdW1Ib21lLFxuICAgICAgICAuLi5zZXJ2ZXJBcmdzLFxuICAgICAgfTtcbiAgICAgIHNlcnZlciA9IC8qKiBAdHlwZSB7QXBwaXVtU2VydmVyfSAqLyAoYXdhaXQgYXBwaXVtU2VydmVyKGFyZ3MpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgZW52ID0gYXdhaXQgc2V0dXBBcHBpdW1Ib21lKCk7XG4gICAgYXdhaXQgaW5zdGFsbERyaXZlcihlbnYpO1xuICAgIGF3YWl0IGluc3RhbGxQbHVnaW4oZW52KTtcbiAgICBhd2FpdCBjcmVhdGVTZXJ2ZXIoKTtcbiAgfSk7XG5cbiAgYWZ0ZXIoYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzZXJ2ZXIpIHtcbiAgICAgIGF3YWl0IHNlcnZlci5jbG9zZSgpO1xuICAgIH1cbiAgfSk7XG59XG5cbi8qKlxuICogQHR5cGVkZWYgRTJFU2V0dXBPcHRzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2FwcGl1bUhvbWVdIC0gUGF0aCB0byBBcHBpdW0gaG9tZSBkaXJlY3RvcnlcbiAqIEBwcm9wZXJ0eSB7TW9jaGEuYmVmb3JlfSBiZWZvcmUgLSBNb2NoYSBcImJlZm9yZSBhbGxcIiBob29rIGZ1bmN0aW9uXG4gKiBAcHJvcGVydHkge01vY2hhLmFmdGVyfSBhZnRlciAtIE1vY2hhIFwiYWZ0ZXIgYWxsXCIgaG9vayBmdW5jdGlvblxuICogQHByb3BlcnR5IHtQYXJ0aWFsPGltcG9ydCgnYXBwaXVtJykuQXJncz59IFtzZXJ2ZXJBcmdzXSAtIEFyZ3VtZW50cyB0byBwYXNzIHRvIEFwcGl1bSBzZXJ2ZXJcbiAqIEBwcm9wZXJ0eSB7aW1wb3J0KCdhcHBpdW0vdHlwZXMnKS5JbnN0YWxsVHlwZSAmIHN0cmluZ30gZHJpdmVyU291cmNlIC0gU291cmNlIG9mIGRyaXZlciB0byBpbnN0YWxsXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW2RyaXZlclBhY2thZ2VdIC0gUGFja2FnZSBuYW1lIG9mIGRyaXZlciB0byBpbnN0YWxsXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZHJpdmVyTmFtZSAtIE5hbWUgb2YgZHJpdmVyIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBkcml2ZXJTcGVjIC0gU3BlYyBvZiBkcml2ZXIgdG8gaW5zdGFsbFxuICogQHByb3BlcnR5IHtpbXBvcnQoJ2FwcGl1bS90eXBlcycpLkluc3RhbGxUeXBlICYgc3RyaW5nfSBwbHVnaW5Tb3VyY2UgLSBTb3VyY2Ugb2YgcGx1Z2luIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbcGx1Z2luUGFja2FnZV0gLSBQYWNrYWdlIG5hbWUgb2YgcGx1Z2luIHRvIGluc3RhbGxcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBwbHVnaW5TcGVjIC0gU3BlYyBvZiBwbHVnaW4gdG8gaW5zdGFsbFxuICogQHByb3BlcnR5IHtzdHJpbmd9IHBsdWdpbk5hbWUgLSBOYW1lIG9mIHBsdWdpbiB0byBpbnN0YWxsXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3BvcnRdIC0gUG9ydCB0byB1c2UgZm9yIEFwcGl1bSBzZXJ2ZXJcbiAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBbaG9zdF0gLSBIb3N0IHRvIHVzZSBmb3IgQXBwaXVtIHNlcnZlclxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge2ltcG9ydCgnQGFwcGl1bS90eXBlcycpLkFwcGl1bVNlcnZlcn0gQXBwaXVtU2VydmVyXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7aW1wb3J0KCdhcHBpdW0vdHlwZXMnKS5BcHBpdW1FbnZ9IEFwcGl1bUVudlxuICovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUNDLE9BQVIsQ0FBZ0IsUUFBaEIsQ0FBbkI7O0FBT08sU0FBU0MsZ0JBQVQsQ0FBMEJDLElBQTFCLEVBQWdDO0VBQ3JDLElBQUk7SUFDRkMsVUFERTtJQUVGQyxNQUZFO0lBR0ZDLEtBSEU7SUFJRkMsVUFBVSxHQUFHLEVBSlg7SUFLRkMsWUFMRTtJQU1GQyxhQU5FO0lBT0ZDLFVBUEU7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