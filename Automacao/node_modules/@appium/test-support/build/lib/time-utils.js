"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fakeTime = fakeTime;

require("source-map-support/register");

function fakeTime(sandbox) {
  let clock = sandbox.useFakeTimers();
  return new TimeLord(clock);
}

class TimeLord {
  constructor(clock) {
    this.clock = clock;
  }

  speedup(interval, times) {
    let tick = n => {
      if (n === 0) return;
      process.nextTick(() => {
        this.clock.tick(interval);
        n--;
        tick(n);
      });
    };

    tick(times);
  }

}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmYWtlVGltZSIsInNhbmRib3giLCJjbG9jayIsInVzZUZha2VUaW1lcnMiLCJUaW1lTG9yZCIsImNvbnN0cnVjdG9yIiwic3BlZWR1cCIsImludGVydmFsIiwidGltZXMiLCJ0aWNrIiwibiIsInByb2Nlc3MiLCJuZXh0VGljayJdLCJzb3VyY2VzIjpbIi4uLy4uL2xpYi90aW1lLXV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBAZGVwcmVjYXRlZCAqL1xuZnVuY3Rpb24gZmFrZVRpbWUoc2FuZGJveCkge1xuICBsZXQgY2xvY2sgPSBzYW5kYm94LnVzZUZha2VUaW1lcnMoKTtcbiAgcmV0dXJuIG5ldyBUaW1lTG9yZChjbG9jayk7XG59XG5cbmNsYXNzIFRpbWVMb3JkIHtcbiAgY29uc3RydWN0b3IoY2xvY2spIHtcbiAgICB0aGlzLmNsb2NrID0gY2xvY2s7XG4gIH1cblxuICBzcGVlZHVwKGludGVydmFsLCB0aW1lcykge1xuICAgIGxldCB0aWNrID0gKG4pID0+IHtcbiAgICAgIGlmIChuID09PSAwKSByZXR1cm47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb2NrLnRpY2soaW50ZXJ2YWwpO1xuICAgICAgICBuLS07XG4gICAgICAgIHRpY2sobik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHRpY2sodGltZXMpO1xuICB9XG59XG5leHBvcnQge2Zha2VUaW1lfTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQ0EsU0FBU0EsUUFBVCxDQUFrQkMsT0FBbEIsRUFBMkI7RUFDekIsSUFBSUMsS0FBSyxHQUFHRCxPQUFPLENBQUNFLGFBQVIsRUFBWjtFQUNBLE9BQU8sSUFBSUMsUUFBSixDQUFhRixLQUFiLENBQVA7QUFDRDs7QUFFRCxNQUFNRSxRQUFOLENBQWU7RUFDYkMsV0FBVyxDQUFDSCxLQUFELEVBQVE7SUFDakIsS0FBS0EsS0FBTCxHQUFhQSxLQUFiO0VBQ0Q7O0VBRURJLE9BQU8sQ0FBQ0MsUUFBRCxFQUFXQyxLQUFYLEVBQWtCO0lBQ3ZCLElBQUlDLElBQUksR0FBSUMsQ0FBRCxJQUFPO01BQ2hCLElBQUlBLENBQUMsS0FBSyxDQUFWLEVBQWE7TUFDYkMsT0FBTyxDQUFDQyxRQUFSLENBQWlCLE1BQU07UUFDckIsS0FBS1YsS0FBTCxDQUFXTyxJQUFYLENBQWdCRixRQUFoQjtRQUNBRyxDQUFDO1FBQ0RELElBQUksQ0FBQ0MsQ0FBRCxDQUFKO01BQ0QsQ0FKRDtJQUtELENBUEQ7O0lBUUFELElBQUksQ0FBQ0QsS0FBRCxDQUFKO0VBQ0Q7O0FBZlkifQ==